# Worklog — 2026-01-27

## Сделано
- Подключен middleware `DbSessionMiddleware`, сессия БД доступна в handlers.
- Реализован `UserService.ensure_user` (создание/обновление пользователя при /start).
- Добавлены стартовые inline-кнопки: «Создать бюджет» / «Присоединиться».
- Добавлены callback handlers с временными сообщениями-заглушками.
- Обновлены сообщения в `docs/messages.md` для новых ответов.
- Добавлен сервис создания первого бюджета и DTO для валидации входных данных.
- Реализован FSM-поток создания бюджета (название → валюта → доп. валюты → таймзона → подтверждение).
- Подключены клавиатуры для пропуска и подтверждения.
- Обновлены UX и шаблоны сообщений для сценария создания бюджета.
- Добавлено логирование ошибок при создании бюджета.
- Добавлены инвайты: таблица budget_invites + миграция + сервисы + UX.
- Изменён сценарий инвайта: перед присоединением показывается подтверждение с названием бюджета и владельцем.

## Текущее состояние
- /start создаёт пользователя и показывает кнопки.
- «Создать бюджет» запускает пошаговый сценарий и подтверждение.
- «Пригласить участника» выдаёт одноразовую ссылку на 24 часа.
- «Присоединиться» принимает ссылку/код и добавляет участника.

## Следующие шаги
- Добавить сервисы budgets/users и обновить UX-флоу.
